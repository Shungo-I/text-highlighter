# Text Highlighter - テキストハイライト Google拡張機能

## 概要
Webページ上で選択したテキストの背景色を変更できるGoogle Chrome拡張機能です。

## インストール方法

### 開発版のインストール（ローカルファイルから）
1. **リポジトリのダウンロード**
   - このリポジトリをクローンまたはダウンロード
   ```bash
   git clone <リポジトリURL>
   ```

2. **Chrome拡張機能の開発者モードを有効化**
   - Google Chromeを開く
   - アドレスバーに `chrome://extensions/` と入力してアクセス
   - 右上の「開発者モード」トグルをONにする

3. **拡張機能の読み込み**
   - 「パッケージ化されていない拡張機能を読み込む」ボタンをクリック
   - ダウンロードした `text-highlighter` フォルダを選択
   - 拡張機能が正常に読み込まれると、ツールバーにアイコンが表示されます

4. **動作確認**
   - 任意のWebページで適当なテキストを選択
   - ツールバーの拡張機能アイコンをクリックして色を選択
   - ハイライトが適用されることを確認

### 注意事項
- 開発者モードでインストールした拡張機能は、Chromeの更新時に無効化される場合があります
- その場合は再度手動で有効化してください

## 使用方法

### 基本的な使い方
1. **テキストをハイライト**
   - マウスドラッグでテキストを選択
   - ツールバーの拡張機能アイコンをクリック
   - 色パレットから希望の色を選択してハイライトを適用

2. **ハイライトを削除**
   - ハイライト箇所を右クリック
   - 「ハイライトを削除」を選択

3. **カスタム色を設定**
   - 拡張機能のポップアップから設定画面を開く
   - カラーピッカーで任意の色を作成・命名

## 基本機能

### テキスト選択ハイライト
- **操作方法**: 
  1. マウスドラッグでテキストを選択
  2. 拡張機能のポップアップ（ツールバーアイコンクリック）を開く
  3. 色パレットから希望の色を選択してハイライトを適用
- **色の種類**: デフォルト8色 + カスタム8色（最大16色）
  - デフォルト色：赤・青・黄・緑・水色・紫・黄緑・桃
  - カスタム色：ユーザーが設定した色（名前付き）
- **重複ハイライト**: 既にハイライトされている箇所に別の色でハイライトした場合は上書きされる

### カスタム色設定
- **設定方法**: 拡張機能のポップアップ（ツールバーアイコンクリック）から設定画面を開く
- **カスタム色数**: 最大8色まで追加可能
- **色の作成**: カラーピッカーを使用して任意の色を作成
- **色の命名**: 各カスタム色に名前をつけることが可能
- **適用範囲**: カスタム色設定は全サイト共通で保存される

### データ永続化
- **ハイライト情報**: ドメイン単位で保存（例：example.com内のハイライトは同ドメイン内でのみ表示）
- **保持期間**: ページリロード後も永続的に保持
- **カスタム色設定**: 全サイト共通で保存

### ハイライト削除
- **削除方法**: ハイライト箇所を右クリック → 「ハイライトを削除」を選択
- **削除範囲**: 選択したハイライト箇所のみ削除（他のハイライトには影響しない）

## 詳細仕様

### 右クリックメニュー構成
```
右クリックメニュー（ハイライト箇所選択時のみ）
└── ハイライトを追加
└── ハイライトを削除
```

### 拡張機能ポップアップ画面
- **色選択パレット**
  - デフォルト8色のカラーボタン（色名表示）
  - カスタム8色のカラーボタン（ユーザー設定名表示）
  - 選択中のテキストがある場合、色ボタンクリックでハイライト適用
- **選択状態表示**
  - 現在選択中のテキスト情報（選択文字数など）
  - 選択がない場合の案内メッセージ「テキストを選択してください」
- **カスタム色管理セクション**
  - 現在設定されているカスタム色一覧（最大8色）
  - 各色の編集・削除ボタン
  - 新しいカスタム色追加ボタン
- **カラーピッカー（カスタム色作成・編集時）**
  - HTML5 color inputを使用
  - 色名入力フィールド（必須）
  - 保存・キャンセルボタン

### データ保存形式
- **ハイライト情報**: `chrome.storage.local`に保存
  - キー: ドメイン名（例：`highlights_example.com`）
  - 値: ハイライト情報の配列
- **カスタム色設定**: `chrome.storage.sync`に保存
  - キー: `custom_colors`
  - 値: カスタム色情報の配列（色コード・色名のペア）

## ファイル構成
```
text-highlighter/
├── manifest.json          # 拡張機能のメタデータ
├── content.js             # コンテンツスクリプト（メイン機能）
├── popup.html             # ポップアップ画面のHTML
├── popup.js               # ポップアップ画面のJavaScript
├── style.css              # ハイライトスタイル
├── icons/                 # 拡張機能アイコン
│   ├── icon16.png
│   ├── icon32.png
│   ├── icon48.png
│   └── icon128.png
└── README.md              # このファイル
```
